<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Breakout</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/jquery-ui.css"/>
        <link rel="stylesheet" href="css/elementos.css"/>
        <script src="js/jquery-3.2.1.js"></script>
        <script src="js/jquery-ui.js"></script>
        <script>
            $(function () {
                $("#plataforma").draggable({axis: 'x', containment: '#container'});

                var posiLetf = $('#bola').position().left;
                var posiTop = $('#bola').position().top;

                function colorirPosicionarBlocos() {
                    $('#bloco11').css({"right":"90%", "background-color":"#654245", "top":"0%"});
                    $('#bloco12').css({"right":"80%", "background-color":"#512469", "top":"0%"});
                    $('#bloco13').css({"right":"70%", "background-color":"#452135", "top":"0%"});
                    $('#bloco14').css({"right":"60%", "background-color":"#154214", "top":"0%"});
                    $('#bloco15').css({"right":"50%", "background-color":"#256134", "top":"0%"});
                    $('#bloco16').css({"right":"40%", "background-color":"#154278", "top":"0%"});
                    $('#bloco17').css({"right":"30%", "background-color":"#123695", "top":"0%"});
                    $('#bloco18').css({"right":"20%", "background-color":"#778459", "top":"0%"});
                    $('#bloco19').css({"right":"10%", "background-color":"#457865", "top":"0%"});
                    $('#bloco110').css({"right":"0%", "background-color":"#258475", "top":"0%"});
                    $('#bloco21').css({"right":"90%", "background-color":"#784569", "top":"5%"});
                    $('#bloco22').css({"right":"80%", "background-color":"#985467", "top":"5%"});
                    $('#bloco23').css({"right":"70%", "background-color":"#135248", "top":"5%"});
                    $('#bloco24').css({"right":"60%", "background-color":"#487578", "top":"5%"});
                    $('#bloco25').css({"right":"50%", "background-color":"#665985", "top":"5%"});
                    $('#bloco26').css({"right":"40%", "background-color":"#235255", "top":"5%"});
                    $('#bloco27').css({"right":"30%", "background-color":"#203500", "top":"5%"});
                    $('#bloco28').css({"right":"20%", "background-color":"#021548", "top":"5%"});
                    $('#bloco29').css({"right":"10%", "background-color":"#458545", "top":"5%"});
                    $('#bloco210').css({"right":"0%", "background-color":"#521458", "top":"5%"});
                    $('#bloco31').css({"right":"90%", "background-color":"#514201", "top":"10%"});
                    $('#bloco32').css({"right":"80%", "background-color":"#421521", "top":"10%"});
                    $('#bloco33').css({"right":"70%", "background-color":"#102154", "top":"10%"});
                    $('#bloco34').css({"right":"60%", "background-color":"#021522", "top":"10%"});
                    $('#bloco35').css({"right":"50%", "background-color":"#215365", "top":"10%"});
                    $('#bloco36').css({"right":"40%", "background-color":"#124569", "top":"10%"});
                    $('#bloco37').css({"right":"30%", "background-color":"#120320", "top":"10%"});
                    $('#bloco38').css({"right":"20%", "background-color":"#784596", "top":"10%"});
                    $('#bloco39').css({"right":"10%", "background-color":"#458784", "top":"10%"});
                    $('#bloco310').css({"right":"0%", "background-color":"#965825", "top":"10%"});
                }

                var top = -10;
                var left = 10;
                var container = $("#container");
                var bola = $("#bola");
                var plataforma = $("#plataforma");
                var blocos = $(".bloco");
                function movimentaBola(){
                    posiTop += top;
                    posiLetf += left;
                    $('#bola').css("top", posiTop);
                    $('#bola').css("left", posiLetf);
                    //verifica colisão em baixo
                    if(bola.position().top+bola.height() >= container.height()){
                        clearInterval(movimento)
                    }
                    //verifica colisão na borda direita
                    else if(bola.position().left+bola.width() >= container.width()){
                        left = -10;
                    }
                    //verifica colisão em cima
                    else if(bola.offset().top <= container.offset().top){
                        top = 10;
                    }
                    //verifica colisão na borda esquerda
                    else if(bola.offset().left <= container.offset().left){
                        left = 10;
                    }
                    //verifica colisão na plataforma
                    //verifica se a parte de baixo da bola está em contato com a parte de cima da plataforma e se a parte esquerda da bola(o certo seria o meio) está entre a parte esquerda e direita da plataforma
                    else if ((bola.position().top+bola.height() >= plataforma.position().top) && (bola.position().left >= plataforma.position().left && bola.position().left <= plataforma.position().left + plataforma.width())) {
                        top = -10;
                    }

                    // for (var i = 1; i <= 3; i++) {
                    //     for (var j = 1; j <= 10; j++) {
                    //         var bloco = $("#bloco"+i+""+j);
                    //         if(bola.position().top <= bloco.position().top + bloco.height()){
                    //             top = 10;
                    //             $("#bloco"+i+""+j).remove();
                    //         }
                    //     }
                    // }

                    // for (var i = 0; i < blocos.length; i++) {
                    //     var bloco = $(blocos[i]);
                    //     if(bola.position().top <= bloco.position().top + bloco.height()){
                    //         top = 10;
                    //         bloco.remove();
                    //     }
                    // }

                }

                var movimento = setInterval(movimentaBola, 1);

                colorirPosicionarBlocos()

            });
        </script>
    </head>
    <body>
        <div id="container">
            <div id="plataforma"> </div>
            <div id="bola">  </div>
            <table>
                <tr>
                    <td><div class="bloco" id="bloco11"> </div> </td>
                    <td><div class="bloco" id="bloco12"> </div> </td>
                    <td><div class="bloco" id="bloco13"> </div> </td>
                    <td><div class="bloco" id="bloco14"> </div> </td>
                    <td><div class="bloco" id="bloco15"> </div> </td>
                    <td><div class="bloco" id="bloco16"> </div> </td>
                    <td><div class="bloco" id="bloco17"> </div> </td>
                    <td><div class="bloco" id="bloco18"> </div> </td>
                    <td><div class="bloco" id="bloco19"> </div> </td>
                    <td><div class="bloco" id="bloco110"> </div> </td>
                </tr>
                <tr>
                    <td><div class="bloco" id="bloco21"> </div> </td>
                    <td><div class="bloco" id="bloco22"> </div> </td>
                    <td><div class="bloco" id="bloco23"> </div> </td>
                    <td><div class="bloco" id="bloco24"> </div> </td>
                    <td><div class="bloco" id="bloco25"> </div> </td>
                    <td><div class="bloco" id="bloco26"> </div> </td>
                    <td><div class="bloco" id="bloco27"> </div> </td>
                    <td><div class="bloco" id="bloco28"> </div> </td>
                    <td><div class="bloco" id="bloco29"> </div> </td>
                    <td><div class="bloco" id="bloco210"> </div> </td>
                </tr>
                <tr>
                    <td><div class="bloco" id="bloco31"> </div> </td>
                    <td><div class="bloco" id="bloco32"> </div> </td>
                    <td><div class="bloco" id="bloco33"> </div> </td>
                    <td><div class="bloco" id="bloco34"> </div> </td>
                    <td><div class="bloco" id="bloco35"> </div> </td>
                    <td><div class="bloco" id="bloco36"> </div> </td>
                    <td><div class="bloco" id="bloco37"> </div> </td>
                    <td><div class="bloco" id="bloco38"> </div> </td>
                    <td><div class="bloco" id="bloco39"> </div> </td>
                    <td><div class="bloco" id="bloco310"> </div> </td>
                </tr>
            </table>
        </div>
    </body>
</html>
